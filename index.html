<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ESP32 Flash By OOM</title>
    <script src="https://cdn.jsdelivr.net/npm/esptool-js@0.4.0/bundle.js"></script>
</head>
<body style="background:#1a1a1a; color:white; text-align:center; font-family:sans-serif; padding:50px;">
    <div style="border:2px solid #00f2ff; padding:30px; border-radius:20px; display:inline-block;">
        <h1>üöÄ ESP32 Web Installer</h1>
        <p id="status" style="color:#00f2ff; font-size:20px;">üîµ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡πá‡∏Ñ‡∏ï‡∏±‡∏ß‡∏ä‡πà‡∏ß‡∏¢...</p>
        <button id="btn" style="padding:15px 30px; font-size:18px; cursor:pointer; background:#555; color:white; border:none; border-radius:10px;" disabled>‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà...</button>
    </div>

    <script>
        // ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ä‡πá‡∏Ñ‡∏ï‡∏±‡∏ß‡∏ä‡πà‡∏ß‡∏¢‡πÅ‡∏ö‡∏ö‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
        const check = setInterval(() => {
            // ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏ä‡∏∑‡πà‡∏≠ window.esptooljs ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
            if (window.esptooljs) {
                clearInterval(check);
                document.getElementById('status').innerText = "‚úÖ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏•‡πâ‡∏ß! ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢";
                const b = document.getElementById('btn');
                b.disabled = false;
                b.style.background = "#00f2ff";
                b.style.color = "black";
                b.innerText = "1. ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ö‡∏≠‡∏£‡πå‡∏î";
            }
        }, 500);

        document.getElementById('btn').onclick = async () => {
            try {
                const port = await navigator.serial.requestPort();
                await port.open({ baudRate: 115200 });
                
                // ‡πÉ‡∏ä‡πâ‡∏ï‡∏±‡∏ß‡∏ä‡πà‡∏ß‡∏¢‡∏ó‡∏µ‡πà‡πÇ‡∏´‡∏•‡∏î‡∏°‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠
                const transport = new window.esptooljs.Transport(port);
                const esploader = new window.esptooljs.ESPLoader(transport, 115200);
                
                document.getElementById('status').innerText = "‚è≥ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÅ‡∏•‡πâ‡∏ß! (‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° BOOT ‡∏Ñ‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡∏î‡πâ‡∏ß‡∏¢)";
                await esploader.main();
                
                document.getElementById('status').innerText = "‚úÖ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏´‡∏•‡πà‡∏≠‡∏à‡∏±‡∏î‡πÄ‡∏•‡∏¢‡∏ô‡∏≤‡∏¢";
                document.getElementById('status').style.color = "#00ff00";
            } catch (e) {
                alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: " + e.message);
            }
        };
    </script>
</body>
</html>
