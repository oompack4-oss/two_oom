<!DOCTYPE html>
<html>
<head>
    <title>ESP32 Flash System</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://unpkg.com/esptool-js@0.4.0/bundle.js"></script>
</head>
<body style="background:#1a1a1a; color:white; text-align:center; font-family:sans-serif; padding:50px;">
    <h1>üöÄ ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á ESP32</h1>
    <div id="status" style="font-size:20px; color:#00f2ff; margin:20px;">üî¥ ‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠...</div>
    <button id="btn" style="padding:20px 40px; font-size:20px; cursor:pointer; background:#00f2ff; border:none; border-radius:10px;">1. ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ö‡∏≠‡∏£‡πå‡∏î</button>

    <script>
        document.getElementById('btn').onclick = async () => {
            try {
                // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏ï‡∏±‡∏ß‡∏ä‡πà‡∏ß‡∏¢‡∏°‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
                const esp = window.esptooljs || window.esptool;
                if (!esp) { 
                    alert("‡∏ï‡∏±‡∏ß‡∏ä‡πà‡∏ß‡∏¢‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÇ‡∏´‡∏•‡∏î‡∏ô‡∏≤‡∏¢! ‡∏•‡∏≠‡∏á‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏ô‡πá‡∏ï‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î F5 ‡∏ô‡∏∞"); 
                    return; 
                }

                const port = await navigator.serial.requestPort();
                await port.open({ baudRate: 115200 });
                
                const transport = new esp.Transport(port);
                const esploader = new esp.ESPLoader(transport, 115200);
                
                document.getElementById('status').innerText = "‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏±‡∏Å‡∏ó‡∏≤‡∏¢‡∏ö‡∏≠‡∏£‡πå‡∏î... (‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° BOOT ‡∏Ñ‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡πÄ‡∏•‡∏¢‡∏ô‡∏≤‡∏¢!)";
                await esploader.main();
                
                document.getElementById('status').innerText = "‚úÖ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏ô‡∏≤‡∏¢‡∏Å‡∏î‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢ (‡∏õ‡∏∏‡πà‡∏°‡∏à‡∏∞‡∏°‡∏≤‡πÄ‡∏£‡πá‡∏ß‡πÜ ‡∏ô‡∏µ‡πâ)";
                document.getElementById('status').style.color = "#00ff00";
            } catch (e) {
                alert("‡∏û‡∏•‡∏≤‡∏î‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ: " + e.message);
            }
        };
    </script>
</body>
</html>